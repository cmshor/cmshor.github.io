<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>SageMathCell</title>
    <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
    <script>
    // Make the div with id 'mycell' a Sage cell
    sagecell.makeSagecell({inputLocation:  '#mycell',
                           template:       sagecell.templates.minimal,
                           evalButtonText: 'Activate'});
    // Make *any* div with class 'compute' a Sage cell
    sagecell.makeSagecell({inputLocation: 'div.compute',
                           evalButtonText: 'Evaluate'});
    </script>
  </head>
  <body>
  <h1>Embedded Sage Cells</h1>

  <h2>Factorial</h2>
  Click the “Activate” button below to calculate factorials.
    <div id="mycell"><script type="text/x-sage">
@interact
def _(a=(1, 10)):
    print(factorial(a))
 </script>
</div>

<h2>Your own computations</h2>
Type your own Sage computation below and click “Evaluate”.
    <div class="compute"><script type="text/x-sage">plot(sin(x), (x, 0, 2*pi))</script></div>
    <div class="compute"><script type="text/x-sage">
@interact
def picture_time(str1=input_box('[5,11,12]',type = str, label='gens'),rows=7,columns=6):
    gens=eval(str1)
    def add_lists(L1,L2,max):
        L=[]
        for l1 in L1:
            for l2 in L2:
                if l1+l2<=max:
                    L.append(l1+l2)
        return(L)

    def get_multiples(a,max):
        i=0
        L=[]
        while a*i<=max:
            L.append(a*i)
            i+=1
        return(L)

    def get_elts(gens,max):
        k=len(gens)
        if k==2:
            a=gens[0]
            b=gens[1]
            L1=get_multiples(a,max)
            L2=get_multiples(b,max)
            L=add_lists(L1,L2,max)
            return(set(L))
        if k>2:
            z=gens[k-1]
            newgens=gens[:-1]
            Lk=get_multiples(z,max)
            return(set(add_lists(get_elts(newgens,max),Lk,max)))
    def build_picture(elts,rows,columns):
        max=rows*columns-1
        var('i,j')
        P=plot([],axes=False)
        for j in range(rows):
            for i in range(columns):
                z=i+j*columns
                if z in elts:
                    P+=text(z,(i,j),color="black",fontweight="bold")
                else:
                    P+=text(z,(i,j),color="green")
        show(P)
    
    max=rows*columns
    elts = get_elts(gens,max)
    build_picture(elts,rows,columns)
</script></div>
  </body>
</html>
